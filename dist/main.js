(()=>{"use strict";document.body.innerHTML="<style>\n    \n\n    body {\n        margin: 0px;\n        display: flex;\n        flex-direction: column;\n        min-height: 100vh;\n        max-height: 100%;\n        justify-content: space-between;\n        font-size: 2rem;\n    }\n    \n    .footer {\n        font-size: 2rem;\n        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n        display: flex;\n        gap: 5px;\n        background-color: #1461a1;\n        justify-content: center;\n        z-index: 3;\n    }\n    \n    a{\n        text-decoration: none;\n    }\n    \n    a img {\n        height: 2.1rem;\n        width: 2rem;\n        filter:brightness(0) invert(1);\n    }\n    \n    .nome-github {\n        color: rgb(255, 255, 255);\n    }\n    \n    .titolo {\n        background-color: yellow;\n    }\n\n    .mainContainer {\n        display : flex;\n        flex: 1;\n        flex-wrap: wrap;\n    }\n\n    .parteSinistra {\n        background-color: blue;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 1rem;\n        flex: 1;\n        flex-wrap: wrap;\n        gap: 2rem;\n    }\n\n    .parteDestra {\n        background-color: pink;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 1rem;\n        flex: 1;\n    }\n\n    .tabella {\n        height : clamp(275px,25vw,30rem);\n        width : clamp(275px,25vw,30rem);\n        background-color : white;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .col {\n        border-style: groove;\n        flex: 1;\n    }\n\n    .row {\n        display: flex;\n        flex: 1;\n    }\n\n    .ship {\n        background-color: red;\n    }\n\n    .hit {\n        background-color : grey;\n    }\n\n    .miss {\n        background-color : purple;\n    }\n    .valid {\n        background-color : green;\n    }\n    .invalid {\n        background-color : yellow;\n    }\n    .info {\n        display: flex;\n        flex-direction: column;\n        gap: 1rem;\n    }\n    .modale {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform : translate(-50%, -50%);\n        height: 200px;\n        width: 200px;\n        padding: 1rem;\n        background: red;\n        z-index: 1001;\n        display: flex;\n        flex-direction: column;\n        text-align: center;\n        justify-content: space-around;\n        align-items: center;\n    }\n\n    .modal-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 1000;\n    }\n\n    </style>\n\n    <div class='titolo'>Battle Ship</div>\n    <div id=\"modalOverlay\"></div>\n    <div class=\"mainContainer\">\n        <div class='parteSinistra'>\n            <div class='tabella' id='human'></div>\n            <div class='info'>\n                <span id='dimensioniNave'>La nave Ã¨ lunga 5.</span>\n                <button id='rotate'>Ruota la nave</button>\n            </div>        \n        </div>\n        <div class='parteDestra'>\n            <div class='tabella' id='bot'></div>    \n        </div>\n    </div>\n\n    <div class=\"footer\">\n\n        <a href=\"https://github.com/ReXerses\" target=\"_blank\">\n            <img src=\"../src/media/github.svg\" alt=\"Personal Github link\">\n        </a>\n        <a class='nome-github' href=\"https://github.com/ReXerses\" target=\"_blank\">ReXerses</a>\n\n    </div>\n    ";const t=document.getElementById("human"),e=document.getElementById("bot"),n="valid",i="invalid",a=10,l=document.querySelector(".info");let o=!0,s="orizzontale";function r(t,e,n,i){"hit"===i.tabella.griglia[e][n].status?(t.classList.remove("ship"),t.classList.add("hit")):"miss"===i.tabella.griglia[e][n].status&&t.classList.add("miss")}function c(n){if(1===n.id)for(let e=0;e<n.tabella.dimensioneGriglia;e++){const i=document.createElement("div");i.className="row",i.dataset.row=e,t.appendChild(i);for(let t=0;t<g.tabella.dimensioneGriglia;t++){const a=document.createElement("div");a.className="col",a.dataset.row=e,a.dataset.col=t,a.classList.add("casellaGiocatore"),"ship"===n.tabella.griglia[e][t].status?a.classList.add("ship"):a.classList.add("empty"),i.appendChild(a)}}else for(let t=0;t<n.tabella.dimensioneGriglia;t++){const i=document.createElement("div");i.className="row",i.dataset.row=t,e.appendChild(i);for(let e=0;e<n.tabella.dimensioneGriglia;e++){const n=document.createElement("div");n.className="col",n.dataset.row=t,n.dataset.col=e,n.classList.add("casellaBot"),i.appendChild(n)}}}const d=t=>({length:t,receivedHit:0,isSunked:!1,hit(){return this.receivedHit+=1},isSunk(){return this.length===this.receivedHit?this.isSunked=!0:this.isSunked=!1}});function u(t=[],e=10){for(let n=0;n<e;n++){t[n]=[];for(let i=0;i<e;i++)t[n][i]={status:"empty",hipPart:null}}return t}const p=()=>({dimensioneGriglia:10,griglia:u(),pezziDiNavi:0,posizionamentoGrigliaValido:(t,e,n,i)=>"orizzontale"===i?!(n+t.length-1>9):!(e+t.length-1>9),sovrapposizioneNaviValido(t,e,n,i){if("orizzontale"===i){for(let i=n;i<n+t.length;i++)if("empty"!=this.griglia[e][i].status)return!1;return!0}for(let i=e;i<e+t.length;i++)if("empty"!=this.griglia[i][n].status)return!1;return!0},placeShip(t,e,n,i){if(this.posizionamentoGrigliaValido(t,e,n,i)&&this.sovrapposizioneNaviValido(t,e,n,i)){for(let a=0;a<t.length;a++)"orizzontale"===i?(this.griglia[e][n+a].status="ship",this.griglia[e][n+a].shipPart=t,this.pezziDiNavi++):(this.griglia[e+a][n].status="ship",this.griglia[e+a][n].shipPart=t,this.pezziDiNavi++);return!0}return!1},areAllShipsSunk(){return 0===this.pezziDiNavi},receiveAttack(t,e){const n=this.griglia[t][e];"ship"===n.status?(n.status="hit",n.shipPart.hit(),this.pezziDiNavi--,n.shipPart.isSunk()&&this.areAllShipsSunk()&&console.log("Hai distrutto tutte le navi!")):"empty"===n.status&&(n.status="miss")}}),h=t=>({id:t,tabella:p(),naviDisponibili:[d(1),d(2),d(3),d(3),d(4),d(5)],autoPosizionamentoNavi(){if(0!==this.naviDisponibili.length){let t=this.naviDisponibili.pop(),e=!0;for(;e;){let n=Math.floor(10*Math.random()),i=Math.floor(10*Math.random()),a=["orizzontale","verticale"],l=a[Math.floor(Math.random()*a.length)];this.tabella.placeShip(t,n,i,l)&&(e=!1)}this.autoPosizionamentoNavi(this.naviDisponibili)}}});let g=h(1),m=h(2);m.autoPosizionamentoNavi(),c(m),e.style.pointerEvents="none",document.getElementById("rotate").addEventListener("click",(()=>{s="orizzontale"===s?"verticale":"orizzontale"})),c(g);let v=document.querySelectorAll(".casellaGiocatore"),b=document.querySelectorAll(".casellaBot");function f(n,i){if(0!=g.naviDisponibili.length){let t=parseInt(i.getAttribute("data-row")),e=parseInt(i.getAttribute("data-col")),n=g.naviDisponibili[g.naviDisponibili.length-1];if(g.tabella.posizionamentoGrigliaValido(n,t,e,s)&&g.tabella.sovrapposizioneNaviValido(n,t,e,s)){let n=g.naviDisponibili.pop();g.tabella.placeShip(n,t,e,s),a=g,document.querySelectorAll(".casellaGiocatore").forEach((t=>{let e=t.getAttribute("data-row"),n=t.getAttribute("data-col");"ship"===a.tabella.griglia[e][n].status&&t.classList.add("ship")}))}}var a;0===g.naviDisponibili.length&&(v.forEach((t=>{t.removeEventListener("click",f)})),t.innerHTML="",c(g),l.style.display="none",e.addEventListener("click",z),t.addEventListener("click",z))}function y(){document.querySelectorAll(".casellaGiocatore").forEach((t=>{t.classList.remove(n,i)}))}function z(){if(o)e.style.pointerEvents="auto";else{e.style.pointerEvents="none";let t=!0;for(;t;){let e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());if("ship"===g.tabella.griglia[e][n].status||"empty"===g.tabella.griglia[e][n].status){let i=document.querySelector(`[data-row="${e}"][data-col="${n}"]`);g.tabella.receiveAttack(e,n),r(i,e,n,g),t=!1}}g.tabella.areAllShipsSunk()?k("BOT"):(o=!0,z())}}function k(d){const u=document.getElementById("modalOverlay"),p=document.querySelector(".mainContainer"),v=document.createElement("div");v.classList.add("modale");const b=document.createElement("span");b.textContent=`${d} WINS!`,v.appendChild(b);const S=document.createElement("button");S.textContent="Restart",v.appendChild(S),p.appendChild(v),u.classList.add("modal-overlay"),S.addEventListener("click",(()=>{t.style.pointerEvents="auto",u.classList.remove("modal-overlay"),v.style.display="none",g=h(1),m=h(2),m.autoPosizionamentoNavi(),e.innerHTML="",t.innerHTML="",c(m),e.style.pointerEvents="none",l.style.display="flex",c(g);let d=document.querySelectorAll(".casellaGiocatore"),p=document.querySelectorAll(".casellaBot");d.forEach((t=>{t.addEventListener("click",(e=>f(0,t)))})),d.forEach((t=>{t.addEventListener("mouseover",(()=>{y();let e=g.naviDisponibili[g.naviDisponibili.length-1],l=parseInt(t.getAttribute("data-row")),o=parseInt(t.getAttribute("data-col")),r=!0;for(let t=0;t<e.length;t++){let e="orizzontale"===s?o+t:o,n="verticale"===s?l+t:l,i=document.querySelector(`[data-row="${n}"][data-col="${e}"]`);(!i||i.classList.contains("ship")||"verticale"===s&&n>=a||"orizzontale"===s&&e>=a)&&(r=!1)}let c=r?n:i;for(let t=0;t<e.length;t++){let e="orizzontale"===s?o+t:o,n="verticale"===s?l+t:l;document.querySelector(`[data-row="${n}"][data-col="${e}"]`).classList.add(c)}}))})),p.forEach((t=>{t.addEventListener("click",(()=>{let e=parseInt(t.getAttribute("data-row")),n=parseInt(t.getAttribute("data-col"));"miss"!=m.tabella.griglia[e][n].status&&"hit"!=m.tabella.griglia[e][n].status&&(m.tabella.receiveAttack(e,n),r(t,e,n,m),o=!1,m.tabella.areAllShipsSunk()?k("HUMAN"):z())}))}))}))}v.forEach((t=>{t.addEventListener("click",(e=>f(0,t)))})),v.forEach((t=>{t.addEventListener("mouseover",(()=>{y();let e=g.naviDisponibili[g.naviDisponibili.length-1],l=parseInt(t.getAttribute("data-row")),o=parseInt(t.getAttribute("data-col")),r=!0;for(let t=0;t<e.length;t++){let e="orizzontale"===s?o+t:o,n="verticale"===s?l+t:l,i=document.querySelector(`[data-row="${n}"][data-col="${e}"]`);(!i||i.classList.contains("ship")||"verticale"===s&&n>=a||"orizzontale"===s&&e>=a)&&(r=!1)}let c=r?n:i;for(let t=0;t<e.length;t++){let e="orizzontale"===s?o+t:o,n="verticale"===s?l+t:l;document.querySelector(`[data-row="${n}"][data-col="${e}"]`).classList.add(c)}}))})),b.forEach((t=>{t.addEventListener("click",(()=>{let e=parseInt(t.getAttribute("data-row")),n=parseInt(t.getAttribute("data-col"));"miss"!=m.tabella.griglia[e][n].status&&"hit"!=m.tabella.griglia[e][n].status&&(m.tabella.receiveAttack(e,n),r(t,e,n,m),o=!1,m.tabella.areAllShipsSunk()?k("HUMAN"):z())}))}))})();