(()=>{"use strict";document.body.innerHTML="<style>\n    \n\n    body {\n        margin: 0px;\n        display: flex;\n        flex-direction: column;\n        min-height: 100vh;\n        max-height: 100%;\n        justify-content: space-between;\n        font-size: 2rem;\n    }\n    \n    .footer {\n        font-size: 2rem;\n        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n        display: flex;\n        gap: 5px;\n        background-color: #1461a1;\n        justify-content: center;\n        z-index: 3;\n    }\n    \n    a{\n        text-decoration: none;\n    }\n    \n    a img {\n        height: 2.1rem;\n        width: 2rem;\n        filter:brightness(0) invert(1);\n    }\n    \n    .nome-github {\n        color: rgb(255, 255, 255);\n    }\n    \n    .titolo {\n        background-color: yellow;\n    }\n\n    .mainContainer {\n        display : flex;\n        flex: 1;\n        flex-wrap: wrap;\n    }\n\n    .parteSinistra {\n        background-color: blue;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 1rem;\n        flex: 1;\n        flex-wrap: wrap;\n        gap: 2rem;\n    }\n\n    .parteDestra {\n        background-color: pink;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 1rem;\n        flex: 1;\n    }\n\n    .tabella {\n        height : clamp(275px,25vw,30rem);\n        width : clamp(275px,25vw,30rem);\n        background-color : white;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .col {\n        border-style: groove;\n        flex: 1;\n    }\n\n    .row {\n        display: flex;\n        flex: 1;\n    }\n\n    .ship {\n        background-color: red;\n    }\n\n    .hit {\n        background-color : grey;\n    }\n\n    .miss {\n        background-color : purple;\n    }\n    .valid {\n        background-color : green;\n    }\n    .invalid {\n        background-color : yellow;\n    }\n\n    </style>\n\n    <div class='titolo'>Battle Ship</div>\n\n    <div class=\"mainContainer\">\n        <div class='parteSinistra'>\n            <div class='tabella' id='human'></div>\n            <button id='rotate'>Ruota la nave</button>        \n        </div>\n        <div class='parteDestra'>\n            <div class='tabella' id='bot'></div>    \n        </div>\n    </div>\n\n    <div class=\"footer\">\n\n        <a href=\"https://github.com/ReXerses\" target=\"_blank\">\n            <img src=\"../src/media/github.svg\" alt=\"Personal Github link\">\n        </a>\n        <a class='nome-github' href=\"https://github.com/ReXerses\" target=\"_blank\">ReXerses</a>\n\n    </div>\n    ";const t=document.getElementById("human"),e=document.getElementById("bot"),i="valid",n="invalid",a=p(1),l=p(2);let o=!0,s="orizzontale";function r(t,e,i,n){"hit"===n.tabella.griglia[e][i].status?(t.classList.remove("ship"),t.classList.add("hit")):"miss"===n.tabella.griglia[e][i].status&&t.classList.add("miss")}function c(i){if(1===i.id)for(let e=0;e<i.tabella.dimensioneGriglia;e++){const n=document.createElement("div");n.className="row",n.dataset.row=e,t.appendChild(n);for(let t=0;t<a.tabella.dimensioneGriglia;t++){const a=document.createElement("div");a.className="col",a.dataset.row=e,a.dataset.col=t,a.classList.add("casellaGiocatore"),"ship"===i.tabella.griglia[e][t].status?a.classList.add("ship"):a.classList.add("empty"),n.appendChild(a)}}else for(let t=0;t<i.tabella.dimensioneGriglia;t++){const n=document.createElement("div");n.className="row",n.dataset.row=t,e.appendChild(n);for(let e=0;e<i.tabella.dimensioneGriglia;e++){const i=document.createElement("div");i.className="col",i.dataset.row=t,i.dataset.col=e,i.classList.add("casellaBot"),n.appendChild(i)}}}const d=t=>({length:t,receivedHit:0,isSunked:!1,hit(){return this.receivedHit+=1},isSunk(){return this.length===this.receivedHit?this.isSunked=!0:this.isSunked=!1}});function h(t=[],e=10){for(let i=0;i<e;i++){t[i]=[];for(let n=0;n<e;n++)t[i][n]={status:"empty",hipPart:null}}return t}const u=()=>({dimensioneGriglia:10,griglia:h(),pezziDiNavi:0,posizionamentoGrigliaValido:(t,e,i,n)=>"orizzontale"===n?!(i+t.length-1>9):!(e+t.length-1>9),sovrapposizioneNaviValido(t,e,i,n){if("orizzontale"===n){for(let n=i;n<i+t.length;n++)if("empty"!=this.griglia[e][n].status)return!1;return!0}for(let n=e;n<e+t.length;n++)if("empty"!=this.griglia[n][i].status)return!1;return!0},placeShip(t,e,i,n){if(this.posizionamentoGrigliaValido(t,e,i,n)&&this.sovrapposizioneNaviValido(t,e,i,n)){for(let a=0;a<t.length;a++)"orizzontale"===n?(this.griglia[e][i+a].status="ship",this.griglia[e][i+a].shipPart=t,this.pezziDiNavi++):(this.griglia[e+a][i].status="ship",this.griglia[e+a][i].shipPart=t,this.pezziDiNavi++);return!0}return!1},areAllShipsSunk(){return 0===this.pezziDiNavi},receiveAttack(t,e){const i=this.griglia[t][e];"ship"===i.status?(i.status="hit",i.shipPart.hit(),this.pezziDiNavi--,i.shipPart.isSunk()&&this.areAllShipsSunk()&&console.log("Hai distrutto tutte le navi!")):"empty"===i.status&&(i.status="miss")}}),p=t=>({id:t,tabella:u(),naviDisponibili:[d(1),d(2),d(3),d(3),d(4),d(5)],autoPosizionamentoNavi(){if(0!==this.naviDisponibili.length){let t=this.naviDisponibili.pop(),e=!0;for(;e;){let i=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),a=["orizzontale","verticale"],l=a[Math.floor(Math.random()*a.length)];this.tabella.placeShip(t,i,n,l)&&(e=!1)}this.autoPosizionamentoNavi(this.naviDisponibili)}}});l.autoPosizionamentoNavi(),c(l),e.style.pointerEvents="none",document.getElementById("rotate").addEventListener("click",(()=>{s="orizzontale"===s?"verticale":"orizzontale"})),c(a);let g=document.querySelectorAll(".casellaGiocatore"),m=document.querySelectorAll(".casellaBot");function v(i,n){if(0!=a.naviDisponibili.length){let t=parseInt(n.getAttribute("data-row")),e=parseInt(n.getAttribute("data-col")),i=a.naviDisponibili[a.naviDisponibili.length-1];if(a.tabella.posizionamentoGrigliaValido(i,t,e,s)&&a.tabella.sovrapposizioneNaviValido(i,t,e,s)){let i=a.naviDisponibili.pop();a.tabella.placeShip(i,t,e,s),l=a,document.querySelectorAll(".casellaGiocatore").forEach((t=>{let e=t.getAttribute("data-row"),i=t.getAttribute("data-col");"ship"===l.tabella.griglia[e][i].status&&t.classList.add("ship")}))}}var l;0===a.naviDisponibili.length&&(g.forEach((t=>{t.removeEventListener("click",v)})),t.innerHTML="",c(a),e.addEventListener("click",b),t.addEventListener("click",b))}function b(){if(o)t.style.pointerEvents="none",e.style.pointerEvents="auto",console.log("Turno dell umano");else{console.log("Turno del bot"),e.style.pointerEvents="none";let t=!0;for(;t;){let e=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());if("ship"===a.tabella.griglia[e][i].status||"empty"===a.tabella.griglia[e][i].status){let n=document.querySelector(`[data-row="${e}"][data-col="${i}"]`);a.tabella.receiveAttack(e,i),r(n,e,i,a),t=!1}}a.tabella.areAllShipsSunk()?alert("Bot wins the game"):(o=!0,b())}}g.forEach((t=>{t.addEventListener("click",(e=>v(0,t)))})),g.forEach((t=>{t.addEventListener("mouseover",(()=>{g.forEach((t=>{t.classList.remove(i,n)}));let e=a.naviDisponibili[a.naviDisponibili.length-1],l=parseInt(t.getAttribute("data-row")),o=parseInt(t.getAttribute("data-col")),r=!0;for(let t=0;t<e.length;t++){let e="orizzontale"===s?o+t:o,i="verticale"===s?l+t:l,n=document.querySelector(`[data-row="${i}"][data-col="${e}"]`);(!n||n.classList.contains("ship")||"verticale"===s&&i>=10||"orizzontale"===s&&e>=10)&&(r=!1)}let c=r?i:n;for(let t=0;t<e.length;t++){let e="orizzontale"===s?o+t:o,i="verticale"===s?l+t:l;document.querySelector(`[data-row="${i}"][data-col="${e}"]`).classList.add(c)}}))})),m.forEach((t=>{t.addEventListener("click",(()=>{let e=parseInt(t.getAttribute("data-row")),i=parseInt(t.getAttribute("data-col"));"miss"!=l.tabella.griglia[e][i].status&&"hit"!=l.tabella.griglia[e][i].status&&(l.tabella.receiveAttack(e,i),r(t,e,i,l),o=!1,l.tabella.areAllShipsSunk()?alert("Human wins the game"):b())}))}))})();